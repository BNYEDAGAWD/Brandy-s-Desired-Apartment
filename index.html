<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brandy's Desired Apartment Finder</title>
    <link rel="stylesheet" href="css/main.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="container">
            <h1 class="header-title">Brandy's Apartment Finder</h1>
            <p class="header-subtitle">West Los Angeles Luxury Search</p>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <!-- Search Section -->
            <section class="search-section">
                <div class="search-card">
                    <h2>Find Your Perfect Apartment</h2>
                    <p class="search-description">
                        Searching for 2-bedroom apartments in West LA with luxury amenities
                        <br>Budget: $4,400 - $5,200/month
                    </p>
                    
                    <div class="search-criteria">
                        <div class="criteria-grid">
                            <div class="criteria-item">
                                <span>2 Bedrooms</span>
                            </div>
                            <div class="criteria-item">
                                <span>1.5-2 Bathrooms</span>
                            </div>
                            <div class="criteria-item">
                                <span>Above Ground Floor</span>
                            </div>
                            <div class="criteria-item">
                                <span>Air Conditioning</span>
                            </div>
                            <div class="criteria-item">
                                <span>Outdoor Space</span>
                            </div>
                            <div class="criteria-item">
                                <span>In-Unit Laundry</span>
                            </div>
                        </div>
                    </div>

                    <button id="searchBtn" class="search-btn">
                        Search Apartments
                    </button>

                    <div id="loadingIndicator" class="loading-indicator" style="display: none;">
                        <div class="spinner"></div>
                        <p>Searching apartments across West LA...</p>
                        <div class="progress-steps">
                            <div class="step" id="step1">Scanning Mar Vista (90066)</div>
                            <div class="step" id="step2">Checking Culver City (90230, 90232)</div>
                            <div class="step" id="step3">Exploring Palms (90034)</div>
                            <div class="step" id="step4">Analyzing and scoring results</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Filter Panel -->
            <section id="filterPanel" class="filter-panel" style="display: none;">
                <div class="filter-header">
                    <h3>Filters</h3>
                    <button id="toggleFilters" class="toggle-btn">
                        ↓
                    </button>
                </div>
                <div class="filter-content">
                    <div class="filter-group">
                        <label>Sort by:</label>
                        <select id="sortBy">
                            <option value="score">Best Match</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                            <option value="newest">Newest Listings</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Min Score:</label>
                        <input type="range" id="minScore" min="0" max="100" value="60">
                        <span id="minScoreValue">60</span>
                    </div>
                    <div class="filter-group">
                        <label>Show only:</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" id="recentOnly"> Recent listings (past week)</label>
                            <label><input type="checkbox" id="renovatedOnly"> Recently renovated</label>
                            <label><input type="checkbox" id="premiumOnly"> Premium amenities</label>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Results Section -->
            <section id="resultsSection" class="results-section" style="display: none;">
                <div class="results-header">
                    <h2 id="resultsTitle">Search Results</h2>
                    <div class="results-stats">
                        <span id="resultsCount">0 apartments found</span>
                        <button id="exportBtn" class="export-btn">
                            Export
                        </button>
                    </div>
                </div>

                <!-- Recent Listings Highlight -->
                <div id="recentListings" class="recent-listings" style="display: none;">
                    <h3>New This Week</h3>
                    <div id="recentResults" class="results-grid recent-grid"></div>
                </div>

                <!-- All Results -->
                <div class="all-results">
                    <h3 id="allResultsTitle">All Matching Apartments</h3>
                    <div id="resultsGrid" class="results-grid"></div>
                </div>

                <!-- No Results Message -->
                <div id="noResults" class="no-results" style="display: none;">
                    <h3>No apartments found</h3>
                    <p>Try adjusting search criteria or check back later.</p>
                </div>
            </section>
        </div>
    </main>

    <!-- Apartment Details Modal -->
    <div id="apartmentModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Apartment Details</h2>
                <button class="modal-close" id="closeModal">
                    ×
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Dynamic content will be inserted here -->
            </div>
            <div class="modal-footer">
                <button id="bookmarkBtn" class="btn-secondary">
                    Bookmark
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Data Attributions Footer -->
    <footer class="data-attributions">
        <div class="container">
            <div class="attribution-content">
                <h4>Data Sources & Attributions</h4>
                <div class="attribution-grid">
                    <div class="attribution-item">
                        <strong>Apartment Listings:</strong>
                        <span>Powered by aggregated data from apartments.com, zillow.com, trulia.com, and other real estate platforms. All listings are sourced directly from these providers.</span>
                    </div>
                    <div class="attribution-item">
                        <strong>Search Technology:</strong>
                        <span>Enhanced search capabilities powered by DeepSearchAgent AI technology with live web data retrieval.</span>
                    </div>
                    <div class="attribution-item">
                        <strong>Data Compliance:</strong>
                        <span>All listings link directly to original sources. No data is stored or redistributed. This application serves as a search aggregator only.</span>
                    </div>
                    <div class="attribution-item">
                        <strong>Third-Party Services:</strong>
                        <span>Search powered by Serper API and Anthropic Claude AI. Maps and location data provided by aggregator sources.</span>
                    </div>
                </div>
                <div class="disclaimer">
                    <p><strong>Disclaimer:</strong> All apartment listings, prices, and availability are subject to change. Please verify all information directly with the listing source before making any rental decisions. This application is not responsible for the accuracy of third-party listing data.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script type="module" src="js/app.js"></script>
</body>
</html>